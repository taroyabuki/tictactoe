#第11回

`10`の内容をコピーして作業開始。

前回：1行目でマルがそろったときの判断だができるようになった。

# バツがそろったときへの対応

関数`そろったか()`が，バツがそろったときには`-1`を返すようにする。

```
function そろったか() {
  if (盤面[0] == 1 && 盤面[1] == 1 && 盤面[2] == 1) {
    return 1;
  }
  if (盤面[0] == -1 && 盤面[1] == -1 && 盤面[2] == -1) {
    return -1;
  }
  return 0;
}
```

呼び出し側でも対応する。

```
if (結果 == 1 || 結果 == -1) {
  $('div').addClass('終');
  $('#セル0').addClass('勝');
  $('#セル1').addClass('勝');
  $('#セル2').addClass('勝');
}
```

# 2行目がそろったときへの対応

```
function そろったか2() {
  if (盤面[3] == 1 && 盤面[4] == 1 && 盤面[5] == 1) {
    return 1;
  }
  if (盤面[3] == -1 && 盤面[4] == -1 && 盤面[5] == -1) {
    return -1;
  }
  return 0;
}
```

呼び出し側でも対応する。

```
var 結果2 = そろったか2();
console.log('そろった2：' + 結果2);

if (結果2 == 1 || 結果2 == -1) {
  $('div').addClass('終');
  $('#セル3').addClass('勝');
  $('#セル4').addClass('勝');
  $('#セル5').addClass('勝');
}
```

これをあと6回繰り返すのは大変。こういうことは，`クリックへの対応()を作ったときにも起きた。

# そろったかどうかをチェックする関数

`そろったか([0, 1, 2])`で1行目を，`そろったか([3, 4, 5])`で2行目を調べられるようにする。つまり，どこをチェックするべきかを引数で教える。

```
function そろったか(筋) {
  var a = 盤面[筋[0]];
  var b = 盤面[筋[1]];
  var c = 盤面[筋[2]];
  if (a === 1 && b === 1 && c === 1) {
    return 1;//○がそろった
  }
  else if (a === -1 && b === -1 && c === -1) {
    return -1;//×がそろった
  }
  return 0;//そろっていない
}

function 筋に勝印を付ける(筋) {
  $('#セル' + 筋[0]).addClass('勝');
  $('#セル' + 筋[1]).addClass('勝');
  $('#セル' + 筋[2]).addClass('勝');
}
```

## 関数の利用

```
var 結果 = そろったか([0, 1, 2]);
if (結果 != 0) {
  $('div').addClass('終');
  筋に勝印を付ける([0, 1, 2]);
}
結果 = そろったか([3, 4, 5]);
if (結果 != 0) {
  $('div').addClass('終');
  筋に勝印を付ける([3, 4, 5]);
}
```

練習：すべての筋をチェックするようにする。

# 繰り返し

すべての筋をチェックするプログラムが，同じようなことの繰り返しでできている。このようなプログラムを書く練習をする。

例題：`hello, world`と10回表示する。

## for文

```
for (var i = 0; i < 10; ++i) {
  console.log(`hello, world`);
}
```

フローチャートを描いてみる。

## ループ変数の利用

1から10の和を求める

```
var sum = 0;
for (var i = 1; i <= 10; ++i) {
  sum = sum + i;//sum += iでもよい
}
console.log(i);
```

# 配列に関するループ

```
var データ = ['風', '林', '火', '山'];

console.log('0番目は' + データ[0] + 'です。');
console.log('1番目は' + データ[1] + 'です。');
console.log('2番目は' + データ[2] + 'です。');
console.log('3番目は' + データ[3] + 'です。');
```

これを次のように書く。

```
for (var i = 0; i < データ.length; ++i) {
  console.log(i + '番目は' + データ[i] + 'です。');
}
```

# 筋の配列

チェックすべき筋を配列にまとめておく。

```
var 筋の配列 = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6],
  [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
var 筋の数 = 筋の配列.length;
```

そろったかどうかを次のようにチェックできるようになる。

```
for (var i = 0; i < 筋の数; ++i) {
  var 結果 = そろったか(筋の配列[i]);
  if (結果 != 0) {
    $('div').addClass('終');
    筋に勝印を付ける(筋の配列[i]);
  }
}
```
