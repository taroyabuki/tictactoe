#第9回

`08`の内容をコピーして作業開始。

## 引数からIDを構築する

HTMLを以下のように修正する（引数を文字列ではなく数値にしておいたほうが後で便利だから）。

```
<div id='セル0' onclick='クリックへの反応(0)'></div>
```

プログラムも変更する。

```
function クリックへの反応(位置) {
  $('#セル' + 位置).css('background', 'blue').css('border-radius', '50px');
}
```

動作は変わらないことを確認する。

## jQueryによるclass属性の操作

`style.css`にマルとバツのスタイルを書いておく。

```
.○, .× {
  border-radius: 50%;
}
.○ {
  background: red !important;
}
.× {
  background: blue !important;
}
```

`クリックへの反応()`では，スタイルを直接操作せず，class属性を操作することにする。

```
function クリックへの反応(位置) {
  $('#セル' + 位置).addClass('○');
}
```

class属性を外すのは`removeClass`だが，ここでは用いない。

## クリックごとに追加するclass属性を変える

いろんな方法がある。

+ （採用）クリック数を数えて○×を判断する。
+ （練習問題）○と×の数を比較して○×を判断する。（グローバル変数を使わなくて済む）
+ （練習問題）手番（先手：1，後手-1）だけを記憶する。（1と-1にするのは計算を楽にするため）
+ （練習問題）「次」は何にするかを記憶しておく。

フローチャートを描いてみる。

ここでは変数「次」を導入することで，クリックごとに追加する属性を変えてみる。

```
var クリック数 = 0;//初めは0回

function クリックへの反応(位置) {
  //クリック数を1増やす
  //クリック数が奇数（2で割った余りが1）なら
  $('#セル' + 位置).addClass('○');
  //そうでないなら
  $('#セル' + 位置).addClass('×');
}
```

### コメントの書き方

+ 1行だけのときは，先頭に`//`を書く。
+ 複数行の時は，`/*`から`*/`までをコメントにする。

### 条件によって処理を分ける：if-else文

```
if (条件) {
  条件が満たされたときに実行する
} else {
  条件が満たされないときに実行する
}
```

実際のコードは次のようになる。

```
var クリック数 = 0;

function クリックへの反応(位置) {
  クリック数++;
  if (クリック数 % 2 == 1) {
    $('#セル' + 位置).addClass('○');
  } else {
    $('#セル' + 位置).addClass('×');
  }
}
```

+ 2で割った余りは`% 2`。
+ 比較は`=`ではなく`==`。

変数「クリック数」を関数の外で定義しておくことが大事。このような変数をグローバル変数という。それに対して，関数の中で定義する変数をローカル変数という。

### ○と×の数を比較して○×を判断する。（時間があれば）

```
//○と×の数を比較して○×を判断する。
function クリックへの反応(位置) {
  var マルの数 = $('.○').length;
  var バツの数 = $('.×').length;
  if (マルの数 == バツの数) {
    $('#セル' + 位置).addClass('○');
  } else {
    $('#セル' + 位置).addClass('×');
  }
}
```

### 手番だけを記憶する。（時間があれば）

```
var 手番 = 1;

function クリックへの反応(位置) {
  if (手番 == 1) {
    $('#セル' + 位置).addClass('○');
  } else {
    $('#セル' + 位置).addClass('×');
  }
  手番 = -手番;
}
```

### 「次」は何にするかを記憶しておく。（時間があれば）

```
var 次 = '○';

function クリックへの反応(位置) {
  $('#セル' + 位置).addClass(次);
  if (次 == '○') {
    次 = '×';
  } else {
    次 = '○';
  }
}
```
